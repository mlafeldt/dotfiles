#!/bin/bash
# Tool to quickly set the git co-author when pair programming, see
# https://help.github.com/articles/creating-a-commit-with-multiple-authors/
#
# For this to work, you need to do 3 things:
#
#   1) Run: git config commit.template '~/.gitmessage'
#   2) Create ~/.gitauthors using git-authors or some other mechanism
#   3) Install fzf or selecta
#
# Run `git-solo` to unset the co-author again.
#

set -e
set -o pipefail

finder=$(command -v fzf || command -v selecta) ||
    { echo "error: install fzf or selecta"; exit 1; }

coauthor="$("$finder" < "$HOME/.gitauthors")"
template="$(git config --path commit.template)"

cat > "$template" <<EOF


Co-authored-by: $coauthor
EOF

echo "You are now pairing with:"
echo "$coauthor"
